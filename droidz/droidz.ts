namespace SpriteKind {
    export const C3po = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy()
    info.changeLifeBy(-1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.C3po, function (sprite, otherSprite) {
    game.over(true, effects.smiles)
    music.playMelody("G B A G C5 B A B ", 120)
})
let trooper: Sprite = null
let mySprite = sprites.create(img`
    . . . . . . . . . . . . . . . .
    . . . . . 1 1 1 1 1 1 . . . . .
    . . . . . 1 b 1 f 1 1 . . . . .
    . . . . 1 1 1 1 1 1 1 1 . . . .
    . . . . 8 8 8 8 8 8 8 8 . . . .
    . . . . 1 1 1 1 1 1 1 1 . . . .
    . . . . 1 1 1 1 1 1 1 1 . . . .
    . . 1 1 1 1 2 b 1 b 1 1 1 1 . .
    . 1 d 1 1 1 9 b 1 b 1 1 1 d 1 .
    . 1 d 1 1 1 2 b 1 b 1 1 1 d 1 .
    . 1 d 1 1 1 1 1 1 1 1 1 1 d 1 .
    . 1 d 1 8 8 8 8 8 8 8 8 1 d 1 .
    . 1 d 1 1 1 1 1 1 1 1 1 1 d 1 .
    . 1 d 1 . . . . . . . . 1 d 1 .
    . 1 d 1 . . . . . . . . 1 d 1 .
    . 1 d 1 . . . . . . . . 1 d 1 .
`, SpriteKind.Player)
let c3po = sprites.create(img`
    . . . . . . 5 5 5 . . . . . . .
    . . . . . 5 5 5 5 5 . . . . . .
    . . . . . 5 4 5 4 5 . . . . . .
    . . . . . 5 5 5 5 5 . . . . . .
    . . . . . 5 5 5 5 5 . . . . . .
    . . . . . . 5 5 5 . . . . . . .
    . . . 2 5 5 5 5 5 5 5 5 . . . .
    . . 2 2 5 5 5 4 5 5 5 5 5 . . .
    . 2 2 2 5 5 4 5 4 5 5 5 5 5 . .
    . 2 2 . 5 5 5 4 5 5 5 . 5 5 . .
    . 2 2 . 5 5 5 5 5 5 5 . 5 5 . .
    . . . . 5 5 5 5 5 5 5 . . . . .
    . . . . . 5 5 5 5 5 . . . . . .
    . . . . . 5 5 . 5 5 . . . . . .
    . . . . . 5 5 . 5 5 . . . . . .
    . . . . 5 5 5 . 5 5 5 . . . . .
`, SpriteKind.C3po)
controller.moveSprite(mySprite)
info.setLife(3)
scene.setBackgroundColor(12)
scene.setTile(15, img`
    f f f f f f f f f f f f f f f f
    f f 8 8 8 8 8 8 8 8 8 8 8 8 f f
    f f 8 c c c c c c c c c c 8 f f
    f f 8 c 8 8 8 8 8 8 8 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 f f f f f f 8 c 8 f f
    f f 8 c 8 8 8 8 8 8 8 8 c 8 f f
    f f 8 c c c c c c c c c c 8 f f
    f f 8 8 8 8 8 8 8 8 8 8 8 8 f f
    f f f f f f f f f f f f f f f f
`, true)
scene.setTileMap(img`
    f f f f f f f f f . . . . . . . . . f f f f f f f f f f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f f f f f f f f f f f . . 1 . . . . . f . 1 . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . . . . . . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . . . . . . . . f . . . . . . 5 . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f f f f f f . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f . . . . f . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f . . . . f . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f . . . . f . . f f f f f f f f f f f f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . f . . . . f . . f . . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . 1 . . . . . . . . . f . . f . . f f f f . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . 1 . . f . . f . . f 5 . f . 1 . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . . . . f . . f . . f . . f . . . . f . . . . . . . . . . . . . . . . . . . .
    f f f f f f f f f f f f f f . . f . . f . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . f . . f . . f . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . f . . f f f f f f f f f . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . f f f f f f f f f f . . f f f f f . . . . f f f f f . . . . . . . . . . . . . . . . . .
    . . . . f . . . . . . f . f f f f . . . f . . . . . . . . f . . . . . . . . . . . . . . . . . .
    . . . . f . . . . . . f . . . . . . . . f . . . . . . 5 . f . . . . . . . . . . . . . . . . . .
    . . . . f . . . . . . f . . . . . . . . f . . . . f f f f f . . . . . . . . . . . . . . . . . .
    . 5 . . f . . . . . . f . . . . . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . f . . . . . . f . . . 5 . . . f f f f f f f f f f . . . . . . . . . . . . . . . . . . .
    . . . f f . . f . . . f . . . . . . . f . . . . . . . . f . . . . . . . . . . . . . . . . . . .
    . . . . . . . f . . . f . . . . . 1 . f . . . 1 . . . . f f f . . . . . . . . . . . . . . . . .
    . . . . . . . f . . . . . . . . . . . f . 5 . . . . . . . . f . . . . . . . . . . . . . . . . .
    . . . . . . . f . . . . . . . . . . f f f f f f f f f f . . f . . . . . . . . . . . . . . . . .
    . . . 1 . . . f . . . . . . f f f f f . . . . . . . . f . . f . . . . . . . . . . . . . . . . .
    . . . . . . . f . . . . f f f . . . f . . . . . . . . f . . f . . . . . . . . . . . . . . . . .
    . . . . . . . f . . f f f . . . 5 . f . . . . . . . . f . . f . . . . . . . . . . . . . . . . .
    . . . . . . . f . . . . . . . . . . f . . . . . . . . f . . f . . . . . . . . . . . . . . . . .
    f f f f f f f f . . . . . . . . . . f . . . . . . . . f . . f . . . . . . . . . . . . . . . . .
    f . . . . . . f . . . . . . . . . . f . . . f f f f f f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . f . . . 1 . . . . . f f . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . 5 . . . . f . . . . . . . . . f . . . . f f f f f f . . . . . . . . . . . . . . . . . . . .
    f . . . . 1 . f . . . . . . . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . f . . . . . . . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . f . . . . . . . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . f f f f f f . . . 1 . . . . . f . . . . . . . . . f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . . . . . . . . f f f f . f f f f f f . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . f f f f f f . . . . f f f . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . 1 . . . . . . . . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . . . . . . . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . f f f f f . . 5 . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . f . . . f . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . f . . . f . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . f . . . f f f f f f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f . . . . . f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    f f f f f f f . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
`)
scene.cameraFollowSprite(mySprite)
scene.setTile(5, img`
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
`, false)
scene.placeOnRandomTile(c3po, 5)
for (let i = 0; i < 10; i++) {
    trooper = sprites.create(img`
        . . . . . . 1 1 1 1 . . . . . .
        . . . . . 1 1 1 1 1 1 . . . . .
        . . . . 1 c c c c c c 1 . . . .
        . . . . 1 c c 1 1 c c 1 . . . .
        . . . . 1 c 1 d d 1 c 1 . . . .
        . . . . 1 1 d d d d 1 1 . . . .
        . . . . . 1 1 1 1 1 1 . . . . .
        . . . . 1 1 1 1 1 1 1 1 . . . .
        . . . 1 1 d 1 d d 1 d 1 1 . . .
        . . 1 1 1 d 1 d d 1 d 1 1 1 . .
        . 1 1 . 1 d 1 d d 1 d 1 . 1 1 .
        . 1 . . 1 1 1 1 1 1 1 1 . . 1 .
        . . . . . 1 1 1 1 1 1 . . . . .
        . . . . . 1 1 . . 1 1 . . . . .
        . . . . . 1 1 . . 1 1 . . . . .
        . . . . 1 1 1 . . 1 1 1 . . . .
    `, SpriteKind.Enemy)
    scene.placeOnRandomTile(trooper, 1)
    scene.setTile(1, img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `, false)
    trooper.follow(mySprite, 40)
}
game.setDialogFrame(img`
    . . b b b b b b b b b b b b b b b b b b b b . .
    . b d 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 d b .
    b d 1 d b b b b b b b b b b b b b b b b d 1 d b
    b 1 d b b b b b b b b b b b b b b b b b b d 1 b
    b 1 b d 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 d b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 b 1 b
    b 1 b d 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 d b 1 b
    b d 1 b b b b b b b b b b b b b b b b b b 1 d b
    b b d 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 d b b
    . b b b b b b b b b b b b b b b b b b b b b b .
    . . b b b b b b b b b b b b b b b b b b b b . .
`)
game.showLongText("R2D2 your are our only hope! Avoid the storm troopers and find C3PO to win.", DialogLayout.Center)

